<!-- Athena Internal Chat -->
<section class="assistant-box" style="max-width:700px; margin:60px auto; padding:20px;">
  <h2>Μίλησε με την Αθηνά</h2>

 <div id="athena-messages"
     style="border:1px solid #ddd; padding:1rem; border-radius:8px;
            max-height:450px; overflow-y:auto; font-size:0.95rem; line-height:1.4;">
</div>


  <form id="athena-form"
        style="margin-top:1rem; display:flex; gap:0.5rem;">
    <input type="text"
           id="athena-input"
           placeholder="Γράψε την ερώτησή σου για την ασφάλιση..."
           style="flex:1; padding:0.5rem; border-radius:6px;
           border:1px solid #ccc;"
           autocomplete="off">
    <button type="submit"
            style="padding:0.5rem 1rem; border-radius:6px;
            border:none; background:#00b5ff; color:white;">
      Αποστολή
    </button>
  </form>
</section>

<script>
  const form = document.getElementById("athena-form");
  const input = document.getElementById("athena-input");
  const messagesDiv = document.getElementById("athena-messages");

  function addMessage(sender, text) {
    const p = document.createElement("p");
    p.style.margin = "0.25rem 0";
    p.innerHTML = `<strong>${sender}:</strong> ${text}`;
    messagesDiv.appendChild(p);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const text = input.value.trim();
    if (!text) return;

    addMessage("Εσύ", text);
    input.value = "";
    addMessage("Αθηνά", "⏳ Σκέφτομαι…");

    try {
      const res = await fetch("/athena", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: text })
      });

      const data = await res.json();
      messagesDiv.removeChild(messagesDiv.lastChild);

      if (data.reply) {
        addMessage("Αθηνά", data.reply);
      } else {
        addMessage("Αθηνά", "Κάτι πήγε στραβά. Προσπαθήστε ξανά.");
      }
    } catch (err) {
      messagesDiv.removeChild(messagesDiv.lastChild);
      addMessage("Αθηνά", "Τεχνικό πρόβλημα. Δοκιμάστε ξανά αργότερα.");
    }
  });
</script>
<!-- END Athena Internal Chat -->
